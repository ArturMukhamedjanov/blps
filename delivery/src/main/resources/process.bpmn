<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.35.0">
  <process id="OrderProcess" name="OrderProcess" isExecutable="true" camunda:historyTimeToLive="7">
    <startEvent id="StartEvent_1" name="Start Order Creation">
      <outgoing>SequenceFlow_1fp17al</outgoing>
    </startEvent>
    <sequenceFlow id="SequenceFlow_1fp17al" sourceRef="StartEvent_1" targetRef="Activity_127bjxv" />
    <userTask id="Activity_127bjxv" name="AuthIn Service">
      <extensionElements>
        <camunda:formData>
          <camunda:formField id="username" label="username" type="string" />
          <camunda:formField id="password" label="password" type="string" />
        </camunda:formData>
      </extensionElements>
      <incoming>SequenceFlow_1fp17al</incoming>
      <outgoing>Flow_0n0rrzz</outgoing>
    </userTask>
    <endEvent id="EndEvent_0x6ir2l" name="EndedOrderWorkflow">
      <incoming>Flow_0edu7if</incoming>
    </endEvent>
    <sequenceFlow id="Flow_0n0rrzz" sourceRef="Activity_127bjxv" targetRef="Activity_1e54jn5" />
    <serviceTask id="Activity_1e54jn5" name="AuthService" camunda:class="delivery.camunda.AuthTask">
      <incoming>Flow_0n0rrzz</incoming>
      <outgoing>Flow_0qg8059</outgoing>
    </serviceTask>
    <exclusiveGateway id="Gateway_0us83aw">
      <incoming>Flow_0qg8059</incoming>
      <outgoing>Flow_12zhy0m</outgoing>
      <outgoing>Flow_1trt2rj</outgoing>
    </exclusiveGateway>
    <sequenceFlow id="Flow_0qg8059" sourceRef="Activity_1e54jn5" targetRef="Gateway_0us83aw" />
    <sequenceFlow id="Flow_12zhy0m" name="OK" sourceRef="Gateway_0us83aw" targetRef="Activity_08fdzbb">
      <conditionExpression xsi:type="tFormalExpression">${auth == true &amp;&amp; customer == true}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="Flow_1trt2rj" name="NO" sourceRef="Gateway_0us83aw" targetRef="Event_03v6abr">
      <conditionExpression xsi:type="tFormalExpression">${auth == false||customer != true}</conditionExpression>
    </sequenceFlow>
    <endEvent id="Event_03v6abr">
      <incoming>Flow_1trt2rj</incoming>
      <errorEventDefinition id="ErrorEventDefinition_1wrmsnn" errorRef="Error_0liglgm" />
    </endEvent>
    <userTask id="Activity_08fdzbb" name="CreateOrder">
      <extensionElements>
        <camunda:formData>
          <camunda:formField id="seller_id" label="seller_id" type="long" />
          <camunda:formField id="item_id" label="item_id" type="long" />
          <camunda:formField id="item_count" label="item_count" type="long" />
        </camunda:formData>
      </extensionElements>
      <incoming>Flow_12zhy0m</incoming>
      <incoming>Flow_0ef9sm6</incoming>
      <outgoing>Flow_0p46cys</outgoing>
    </userTask>
    <sequenceFlow id="Flow_0p46cys" sourceRef="Activity_08fdzbb" targetRef="Activity_1hvzn33" />
    <serviceTask id="Activity_1hvzn33" name="OrderCreationService" camunda:class="delivery.camunda.OrderProcessorDelegate">
      <incoming>Flow_0p46cys</incoming>
      <outgoing>Flow_04q40y7</outgoing>
    </serviceTask>
    <exclusiveGateway id="Gateway_0wnynj7">
      <incoming>Flow_04q40y7</incoming>
      <outgoing>Flow_0ef9sm6</outgoing>
      <outgoing>Flow_0edu7if</outgoing>
    </exclusiveGateway>
    <sequenceFlow id="Flow_04q40y7" sourceRef="Activity_1hvzn33" targetRef="Gateway_0wnynj7" />
    <sequenceFlow id="Flow_0ef9sm6" name="No&#10;" sourceRef="Gateway_0wnynj7" targetRef="Activity_08fdzbb">
      <conditionExpression xsi:type="tFormalExpression">${orderSuccess!= true}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="Flow_0edu7if" name="Yes&#10;" sourceRef="Gateway_0wnynj7" targetRef="EndEvent_0x6ir2l">
      <conditionExpression xsi:type="tFormalExpression">${orderSuccess== true}</conditionExpression>
    </sequenceFlow>
  </process>
  <error id="Error_0liglgm" name="Wrong Password" errorCode="401" camunda:errorMessage="Wrong Password" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="OrderProcess">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="179" y="99" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="170" y="142" width="56" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_127bjxv_di" bpmnElement="Activity_127bjxv">
        <dc:Bounds x="270" y="77" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1e54jn5_di" bpmnElement="Activity_1e54jn5">
        <dc:Bounds x="450" y="77" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0us83aw_di" bpmnElement="Gateway_0us83aw" isMarkerVisible="true">
        <dc:Bounds x="635" y="92" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1lkr8qx_di" bpmnElement="Event_03v6abr">
        <dc:Bounds x="732" y="212" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0j5fomn" bpmnElement="Activity_08fdzbb">
        <dc:Bounds x="780" y="77" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1ssq58p" bpmnElement="Activity_1hvzn33">
        <dc:Bounds x="950" y="77" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0wnynj7_di" bpmnElement="Gateway_0wnynj7" isMarkerVisible="true">
        <dc:Bounds x="1125" y="92" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_0x6ir2l_di" bpmnElement="EndEvent_0x6ir2l">
        <dc:Bounds x="1262" y="99" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1239" y="142" width="87" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1fp17al_di" bpmnElement="SequenceFlow_1fp17al">
        <di:waypoint x="215" y="117" />
        <di:waypoint x="270" y="117" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0n0rrzz_di" bpmnElement="Flow_0n0rrzz">
        <di:waypoint x="370" y="117" />
        <di:waypoint x="450" y="117" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0qg8059_di" bpmnElement="Flow_0qg8059">
        <di:waypoint x="550" y="117" />
        <di:waypoint x="635" y="117" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_12zhy0m_di" bpmnElement="Flow_12zhy0m">
        <di:waypoint x="685" y="117" />
        <di:waypoint x="780" y="117" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="721" y="99" width="17" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1trt2rj_di" bpmnElement="Flow_1trt2rj">
        <di:waypoint x="660" y="142" />
        <di:waypoint x="660" y="230" />
        <di:waypoint x="732" y="230" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="667" y="183" width="17" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0p46cys_di" bpmnElement="Flow_0p46cys">
        <di:waypoint x="880" y="117" />
        <di:waypoint x="950" y="117" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_04q40y7_di" bpmnElement="Flow_04q40y7">
        <di:waypoint x="1050" y="117" />
        <di:waypoint x="1125" y="117" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ef9sm6_di" bpmnElement="Flow_0ef9sm6">
        <di:waypoint x="1150" y="142" />
        <di:waypoint x="1150" y="240" />
        <di:waypoint x="830" y="240" />
        <di:waypoint x="830" y="157" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="983" y="222" width="15" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0edu7if_di" bpmnElement="Flow_0edu7if">
        <di:waypoint x="1175" y="117" />
        <di:waypoint x="1262" y="117" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1210" y="99" width="18" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>
